<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Solar Irradiance Prediction</title>

<style>
* { box-sizing: border-box; }

body {
    margin: 0;
    font-family: 'Poppins', Arial, sans-serif;
    color: white;
}

.page {
    display: none;
    min-height: 100vh;
    padding: 40px 20px;
}
.page.active { display: block; }

.card {
    max-width: 420px;
    margin: auto;
    background: rgba(0,0,0,0.45);
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(0,0,0,0.6);
}

h1, h2 { text-align: center; }
p { text-align: center; }

button {
    width: 100%;
    padding: 12px;
    margin-top: 12px;
    border: none;
    border-radius: 12px;
    font-size: 15px;
    font-weight: bold;
    cursor: pointer;
    background: linear-gradient(135deg,#ffeb3b,#ff9800);
    color: black;
}

input, select {
    width: 100%;
    padding: 10px;
    margin-top: 10px;
    border-radius: 10px;
    border: none;
}

.status {
    margin-top: 15px;
    font-size: 13px;
    line-height: 1.6;
}

.result {
    margin-top: 15px;
    padding-left: 10px;
    border-left: 4px solid #ffeb3b;
    font-size: 14px;
}

/* BACKGROUNDS */
#home {
    background: linear-gradient(135deg, #ff7e5f, #feb47b); 
   }
#about {
    background: linear-gradient(135deg, #667eea, #764ba2);
}

#locations {
    background: linear-gradient(135deg, #2193b0, #6dd5ed);
}

#predict {
    background: linear-gradient(135deg, #f7971e, #ffd200);
}
#resultPage {
    background: linear-gradient(135deg, #56ab2f, #a8e063);
}

</style>
</head>

<body>

<!-- HOME -->
<div class="page active" id="home">
    <div class="card">
        <h1>üåû Solar Irradiance Prediction</h1>
        <p>Frontend Simulation for Solar Energy Forecasting</p>
        <button onclick="showPage('locations')">Start Project</button>
        <button onclick="showPage('about')">About Us</button>
    </div>
</div>

<!-- ABOUT -->
<div class="page" id="about">
    <div class="card">
        <h2>üë©‚Äçüéì About Us</h2>
        <ul>
            <li><b>B. Vandhana</b><br>222U1A3704</li>
            <li><b>K. J. Subhasri</b><br>222U1A3724</li>
            <li><b>N. Prasanthi</b><br>222U1A3737</li>
            <li><b>P. Saranya</b><br>222U1A3744</li>
            <li><b>P. Kavyanjali</b><br>222U1A3744</li>
        </ul>
        <button onclick="showPage('home')">‚¨Ö Back</button>
    </div>
</div>

<!-- LOCATIONS (UNCHANGED) -->
<div class="page" id="locations">
    <div class="card">
        <h2>Select Location</h2>

        <div class="locPage">
            <button onclick="openPredict('Nellore')">Nellore</button>
            <button onclick="openPredict('Chennai')">Chennai</button>
            <button onclick="openPredict('Hyderabad')">Hyderabad</button>
            <button onclick="openPredict('Bangalore')">Bangalore</button>
            <button onclick="openPredict('Vijayawada')">Vijayawada</button>
        </div>

        <div class="locPage">
            <button onclick="openPredict('Visakhapatnam')">Visakhapatnam</button>
            <button onclick="openPredict('Tirupati')">Tirupati</button>
            <button onclick="openPredict('Guntur')">Guntur</button>
            <button onclick="openPredict('Kurnool')">Kurnool</button>
            <button onclick="openPredict('Rajahmundry')">Rajahmundry</button>
        </div>

        <button onclick="prevLoc()">‚óÄ Previous</button>
        <button onclick="nextLoc()">Next ‚ñ∂</button>
        <button onclick="showPage('home')">‚¨Ö Back</button>
    </div>
</div>

<!-- PREDICT -->
<div class="page" id="predict">
    <div class="card">
        <h2 id="locTitle"></h2>

        <!-- AREA ADDED -->
        <select id="area">
            <option value="">Select Area</option>
        </select>

        <input type="time" id="time" value="12:00">

        <!-- BUTTON UPDATED -->
        <button onclick="predictAndRedirect()">Predict Solar Irradiance</button>

        <!-- ORIGINAL OUTPUT (KEPT) -->
        <div class="status" id="status"></div>
        <div class="result" id="result"></div>

        <button onclick="showPage('locations')">‚¨Ö Change Location</button>
    </div>
</div>

<!-- RESULT PAGE (NEW) -->
<div class="page" id="resultPage">
    <div class="card">
        <h2>üìä Prediction Result</h2>
        <div class="result" id="finalResult"></div>
        <button onclick="showPage('predict')">‚¨Ö Back</button>
        <button onclick="showPage('home')">üè† Home</button>
    </div>
</div>

<script>
function showPage(id) {
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

let currentLocation = "";
let locIndex = 0;
const locPages = document.getElementsByClassName("locPage");

/* AREAS FOR MORE LOCATIONS */
const areaData = {
    Nellore: ["Stonehousepet", "Vedayapalem", "Magunta Layout", "Balaji Nagar"],
    Chennai: ["T Nagar", "Anna Nagar", "Velachery", "Tambaram"],
    Hyderabad: ["Gachibowli", "Madhapur", "Kukatpally", "Ameerpet"],
    Bangalore: ["Whitefield", "Indiranagar", "Electronic City", "Yelahanka"],
    Vijayawada: ["Benz Circle", "Patamata", "Poranki", "Governorpet"],
    Visakhapatnam: ["MVP Colony", "Gajuwaka", "Seethammadhara", "Rushikonda"],
    Tirupati: ["Mangalam", "RC Road", "Renigunta"],
    Guntur: ["Brodipet", "Lakshmipuram", "Pattabhipuram"],
    Kurnool: ["Ballary Chowk", "Ashok Nagar", "Orvakal"],
    Rajahmundry: ["Danavaipeta", "Alcot Gardens", "Dowleswaram"]
};

function openPredict(loc) {
    currentLocation = loc;
    document.getElementById("locTitle").innerText = "üìç " + loc;

    const areaSelect = document.getElementById("area");
    areaSelect.innerHTML = '<option value="">Select Area</option>';

    if (areaData[loc]) {
        areaData[loc].forEach(a => {
            const opt = document.createElement("option");
            opt.value = a;
            opt.textContent = a;
            areaSelect.appendChild(opt);
        });
    }

    document.getElementById("status").innerHTML = "";
    document.getElementById("result").innerHTML = "";
    showPage('predict');
}

function updateLocPages() {
    for (let i = 0; i < locPages.length; i++) {
        locPages[i].style.display = (i === locIndex) ? "block" : "none";
    }
}
updateLocPages();

function nextLoc() {
    if (locIndex < locPages.length - 1) { locIndex++; updateLocPages(); }
}
function prevLoc() {
    if (locIndex > 0) { locIndex--; updateLocPages(); }
}

function rand(min, max) {
    return Math.random() * (max - min) + min;
}
function wait(ms) {
    return new Promise(r => setTimeout(r, ms));
}

/* ORIGINAL PREDICT FUNCTION (UNCHANGED) */
async function predict() {
    const status = document.getElementById("status");
    const result = document.getElementById("result");

    status.innerHTML = "";
    result.innerHTML = "";

    const hour = parseInt(document.getElementById("time").value.split(":")[0]);

    status.innerHTML += "üåê Fetching weather data for " + currentLocation + "...<br>";
    await wait(600);

    const tempC = rand(26, 30);
    const humidity = rand(40, 75);
    const pressure = rand(1005, 1018);

    status.innerHTML += "‚öôÔ∏è Processing atmospheric parameters...<br>";
    await wait(600);

    status.innerHTML += "ü§ñ Running solar irradiance model...<br>";
    await wait(700);

    let irradiance;
    if (hour >= 6 && hour < 9) irradiance = rand(200, 450);
    else if (hour < 12) irradiance = rand(500, 750);
    else if (hour < 15) irradiance = rand(750, 1000);
    else if (hour < 17) irradiance = rand(400, 650);
    else if (hour < 18) irradiance = rand(200, 350);
    else irradiance = rand(10, 60);

    const tempF = (tempC * 9/5) + 32;
    const pressureMmHg = pressure * 0.75006;

    status.innerHTML += "‚úÖ Prediction completed<br>";

    result.innerHTML = `
        <b>Predicted Solar Irradiance</b><br>
        <span style="font-size:20px;color:#ffeb3b;">
        ${irradiance.toFixed(2)} W/m¬≤
        </span><br><br>

        üå° Temperature: ${tempC.toFixed(1)} ¬∞C | ${tempF.toFixed(1)} ¬∞F<br>
        üíß Humidity: ${humidity.toFixed(0)} %<br>
        üå¨ Pressure: ${pressure.toFixed(0)} hPa | ${pressureMmHg.toFixed(1)} mmHg
    `;
}

/* REDIRECT AFTER PREDICTION */
async function predictAndRedirect() {
    await predict();

    const area = document.getElementById("area").value || "Not specified";

    document.getElementById("finalResult").innerHTML = `
        üìç Location: ${currentLocation}<br>
        üèò Area: ${area}<br><br>
        ${document.getElementById("result").innerHTML}
    `;

    showPage('resultPage');
}
</script>

</body>
</html>
